{"version":3,"file":"viewer.min.js","sources":["../src/viewer.js"],"names":["define","$","Ajax","Notification","Str","GearViewer","constructor","options","this","cmid","gearid","config","hotspots","enabled","hotspotsEnabled","hotspotsEditable","edit","arEnabled","ar_enabled","vrEnabled","vr_enabled","modelsData","models","hotspotsData","canManage","canmanage","container","document","getElementById","canvas","isFullscreen","isAutoRotating","scene","camera","renderer","controls","model","hotspotMeshes","raycaster","mouse","THREE","Vector2","init","await","loadThreeJS","setupScene","setupControls","setupRaycaster","setupEventListeners","loadModels","loadHotspots","animate","eventDetail","dispatchEvent","CustomEvent","detail","error","exception","Promise","resolve","setTimeout","Error","camPos","Scene","bgColor","background","Color","aspect","clientWidth","clientHeight","PerspectiveCamera","position","set","WebGLRenderer","antialias","alpha","setSize","setPixelRatio","window","devicePixelRatio","outputEncoding","sRGBEncoding","xr","setupLighting","addEventListener","onResize","spotLight","preset","lighting","ambient","AmbientLight","add","keyLight","DirectionalLight","fillLight","rimLight","sunLight","skyLight","HemisphereLight","SpotLight","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","Math","PI","fullscreenBtn","toggleFullscreen","autorotateBtn","toggleAutoRotate","arBtn","setupARButton","vrBtn","setupVRButton","button","navigator","isSessionSupported","startARSession","disabled","title","get_string","startVRSession","loader","gltf","length","GLTFLoader","modelData","reject","load","url","undefined","scale","setScalar","centerCameraOnModel","addPlaceholderModel","classList","console","geometry","BoxGeometry","material","MeshStandardMaterial","color","metalness","roughness","Mesh","box","Box3","setFromObject","center","getCenter","Vector3","size","getSize","maxDim","max","x","y","z","fov","cameraZ","abs","tan","target","copy","update","setAnimationLoop","rotation","render","width","height","updateProjectionMatrix","icon","closest","toggle","querySelector","session","requestSession","requiredFeatures","setSession","trackEvent","optionalFeatures","action","data","call","methodname","args","JSON","stringify","Raycaster","rect","getBoundingClientRect","event","clientX","left","clientY","top","setFromCamera","shiftKey","modelIntersects","intersectObject","point","showAddHotspotForm","intersects","intersectObjects","hotspotMesh","object","showHotspotPopup","userData","sphere","pos","SphereGeometry","MeshBasicMaterial","transparent","opacity","hotspot","clone","push","content","editBtn","popup","createElement","id","className","innerHTML","appendChild","remove","textContent","style","marginLeft","trackInteraction","hotspotId","hotspotToEdit","form","value","removeAttribute","dataset","posX","usedPos","toFixed","posY","posZ","onclick","saveNewHotspot","titleInput","contentInput","trim","parseFloat","parseInt","modelid","type","then","updated","i","hm","response","let","addNotification","message","catch","alert"],"mappings":"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"}